# Deployment - Φίλτρα Τιμολόγησης & Δελτίου Συντήρησης
**Ημερομηνία:** 10 Νοεμβρίου 2025  
**Feature:** Προσθήκη φίλτρων για τιμολογημένες συντηρήσεις και αποσταλμένα δελτία

## 📋 Αρχεία για Upload

### 1️⃣ Αρχεία που πρέπει να ανέβουν:
- `models/TransformerMaintenance.php` → `/models/`
- `views/maintenances/index.php` → `/views/maintenances/`
- `controllers/TransformerMaintenanceController.php` → `/controllers/`

### 2️⃣ ΔΕΝ χρειάζεται SQL
Αυτή η αλλαγή δεν χρειάζεται database migration γιατί χρησιμοποιεί τις στήλες που προσθέσαμε στην προηγούμενη αλλαγή (`is_invoiced` και `report_sent`).

## 🔍 Τι Προστέθηκε

### Νέα Φίλτρα στη σελίδα maintenances:
1. **Τιμολογήθηκε** (dropdown):
   - Όλες
   - Ναι (μόνο τιμολογημένες)
   - Όχι (μόνο μη τιμολογημένες)

2. **Δελτίο Στάλθηκε** (dropdown):
   - Όλες
   - Ναι (μόνο με αποσταλμένο δελτίο)
   - Όχι (μόνο χωρίς δελτίο)

### Αλλαγές στον Κώδικα:

**TransformerMaintenance Model:**
- Προστέθηκαν παράμετροι `$isInvoiced` και `$reportSent` στη μέθοδο `getAll()`
- Προστέθηκαν παράμετροι `$isInvoiced` και `$reportSent` στη μέθοδο `getTotalCount()`
- Προστέθηκαν SQL WHERE clauses για filtering

**TransformerMaintenanceController:**
- Προστέθηκε ανάγνωση των `is_invoiced` και `report_sent` από $_GET
- Πέρασμα των φίλτρων στο model
- Πέρασμα των τιμών στο view για να διατηρούνται οι επιλογές

**maintenances/index.php View:**
- Προστέθηκαν 2 dropdown φίλτρα στη φόρμα αναζήτησης
- Ενημερώθηκε το "Καθαρισμός Φίλτρων" button
- Ενημερώθηκε το pagination query string
- Responsive layout (6 φίλτρα σε μία γραμμή)

## ✅ Testing Checklist

Μετά το deployment:
- [ ] Άνοιγμα https://ecowatt.gr/crm/maintenances
- [ ] Επιβεβαίωση ότι εμφανίζονται τα 2 νέα dropdown φίλτρα
- [ ] Δοκιμή φίλτρου "Τιμολογήθηκε: Όχι" - πρέπει να δείξει μόνο μη τιμολογημένες
- [ ] Δοκιμή φίλτρου "Δελτίο Στάλθηκε: Όχι" - πρέπει να δείξει μόνο χωρίς δελτίο
- [ ] Δοκιμή συνδυασμού φίλτρων
- [ ] Επιβεβαίωση ότι το pagination διατηρεί τα φίλτρα
- [ ] Επιβεβαίωση ότι το "Καθαρισμός Φίλτρων" δουλεύει

## 📝 Σημειώσεις
- Τα φίλτρα λειτουργούν ανεξάρτητα και μπορούν να συνδυαστούν
- Τα φίλτρα διατηρούνται στο pagination
- Όλα τα φίλτρα (αναζήτηση + ημερομηνίες + νέα φίλτρα) μπορούν να συνδυαστούν
